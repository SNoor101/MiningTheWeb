<!DOCTYPE html>
<html>
  <head>
    <title>Mining the Web - Class 3</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../slide.css"/>
  </head>
  <body>
    <textarea id="source">

layout:true

<p class="footer">
<span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Mining the Web</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://www.datapolitan.com" property="cc:attributionName" rel="cc:attributionURL">Richard Dunks</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative-Commons-License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a>
</p>

---

class: center, middle
![img-center-30](../images/pratt_logo.png)
#Mining the Web
###Richard Dunks
###Slides are available here: http://www.datapolitan.com/MiningTheWeb/class3/

---
class:center,middle
#Day Three

---

#Goals for tonight
+ Present critiques
+ Review git and Github
+ Demonstrate how to embed CartoDB visualizations
+ Embed visualizations and present to class
+ Continue discussing ways to acquire data
+ Introduce application programming interfaces (APIs)

---

#Readings for today
+ Chris Whong "[Foiling NYC's Taxi Trip Data](http://chriswhong.com/open-data/foil_nyc_taxi/)"
+ Thomas Levine, [Introduction to web scraping](https://thomaslevine.com/!/web-sites-to-data-tables/)
+ [Introduction to APIs ch 1-5](https://zapier.com/learn/apis/)

---

class:center,middle
#Visualization Critiques
##http://www.datapolitan.com/MiningTheWeb/

---

class:center,middle
#Introduction to Git

---

class:center,middle
#Why Git?

---

class:center,middle
![img-full](../images/git1.png)

---

class:center,middle
![img-full](../images/git2.png)

---

class:center,middle
![img-full](../images/git3.png)

---

class:center,middle
![img-full](../images/git4.png)

---

class:center,middle
#Collaborating with Git

---

class:center,middle
![img-full](../images/git5.png)

---

class:center,middle
![img-full](../images/git6.png)

---

class:center,middle
![img-full](../images/git7.png)

---

class:center,middle
![img-full](../images/git8.png)

---

class:center,middle
![img-full](../images/git9.png)

---

class:center,middle
![img-full](../images/git10.png)

---

class:center,middle
![img-full](../images/git11.png)

---

class:center,middle
![img-full](../images/git12.png)

---

class:center,middle
![img-full](../images/git13.png)

---
class:center
#Git Workflow
![img-full](../images/git14.png)

---

#Committing to Github
![img](../images/github0.png)

---

#Committing to Github
![img](../images/github1.png)

---

class:middle,center
#Add your awesome content in your text editor

---

#Committing to Github
![img](../images/github2.png)

---

#Committing to Github
![img](../images/github4.png)


---

#Some things to install
+ OpenRefine: http://openrefine.org/download.html
+ [JSONView for Chrome](https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc?hl=en)

---

class:center,middle
#Data and the Web

---

#Data Portals
--

+ Organize available data
--

+ Provide tools for visualizing, combining, and downloading data

---

class:center,middle
#Manual Scraping
Example from Eric Brelsford - OpenRefine

http://www.youtube.com/watch?v=KQlCTo0Q71Q 

---

class:center,middle
#Manual Scraping Example
##http://bit.ly/ScrapeExample

---

#Manual Scraping Example
![img-full](../images/man_scraping.png)

---

#Manual Scraping Example
![img-full](../images/man_scraping2.png)

---

#Manual Scraping Example
![img-full](../images/man_scraping3.png)

---

#Manual Scraping Example
![img-full](../images/man_scraping4.png)

---

#Manual Scraping Example
![img-full](../images/man_scraping5.png)

---

#Manual Scraping Example
![img-full](../images/man_scraping6.png)

---

class:middle,center
#Copy the response
#Paste into text editor
##&nbsp;

---

class:middle,center
#Copy the response
#Paste into text editor
##or...

---

class:middle,center
#Introduction to OpenRefine
![img-center-50](../images/or_book.png)

https://www.packtpub.com/big-data-and-business-intelligence/using-openrefine 

---

#OpenRefine
--

+ In-browser application
--

+ Used to clean data
--

+ Converts data from various file types
--

+ Exports data into various formats

---

#OpenRefine - Pros
--

+ Works with lots of data types
--

+ Great for converting Excel files to CSV (the carriage return problem)
--

+ Facets are powerful (facet on anything)
--

+ Can export to various formats
--

+ Meant specifically to clean data

---

#OpenRefine - Cons
--

+ In browser memory is limited
--

+ Only display 50 rows at a time
--

+ Meant for cleaning data (not displaying it)

---

#Copying Data into OpenRefine
![img-full](../images/or1.png)

---

#Copying Data into OpenRefine
![img-full](../images/or2.png)

---

#Loading JSON Data into OpenRefine
![img-full](../images/or3.png)

---

#Loading JSON Data into OpenRefine
![img-full](../images/or4.png)
###Mouse-over the desired JSON level

---

#Creating a Project
![img-full](../images/or5.png)

---


#If you get an error about Reconcile service, try this:
###https://groups.google.com/forum/#!topic/openrefine/IkMN-GLm_nw
####(Requires Google login)

---

#Renaming a Column
![img-full](../images/or6.png)

---

#Renaming a Column

![img](../images/or7.png)

---

#Renaming a Column
![img-full](../images/or8.png)

---

#Export Data as CSV
![img-full](../images/or9.png)

---

class:center,middle
#Upload the Data to CartoDB and Style

---

class:center,middle
#Let's try that again
###http://nyti.ms/1DOACSp 

---

class: center, middle
![img-full](../images/nyt1.png)

---

class: center, middle
![img-full](../images/nyt2.png)

---

class: center, middle
![img-full](../images/nyt3.png)

---

#TopoJSON
+ Compact representation of geometries (up to 80% smaller)
+ Only represent polygon boundaries once

---

#TopoJSON Links
+ https://github.com/mbostock/topojson/wiki (information on TopoJson)
+ http://blog.thematicmapping.org/2013/06/converting-shapefiles-to-topojson.html 
+ http://shancarter.github.io/distillery/ (GeoJSON to TopoJSON convertor)
+ http://jeffpaine.github.io/geojson-topojson/ (TopoJSON to GeoJSON convertor)

---

#10 Min Break


---

class:center
#Manual Downloading
![img-full](../images/clicking.gif)
<!-- beginning of c block -->

---

class:center
#Manual Downloading
![img-full](../images/suck.gif)

---

#Introduction to APIs

---

#Introduction to APIs
+ Application Program Interface (API)

---

#Introduction to APIs
+ Application Program Interface (API)
+ A tool for making a website's data digestible for a computer

---

#API Steps

---

#API Steps
+ Make a request

---

#API Steps
+ Make a request
+ Get a response

---

#API Steps
+ Make a request
+ Get a response
##&nbsp;
![img-full](../images/api1.png)

---

#Using an API

---

#Using an API
1. Register for API keys

---

#Using an API
1. Register for API keys
2. Use the keys for a request

---

#Using an API
1. Register for API keys
2. Use the keys for a request
3. Parse the response

---

#Using an API
1. Register for API keys
2. Use the keys for a request
3. Parse the response
4. Make beautiful visualizations

---

#Example API Response

---

#Example API Response
![img-full](../images/api2.png)

---

#Example API Response
![img-full](../images/api2.png)
![img](../images/api3.png)

---

#Example API Response
![img-full](../images/api2.png)
![img](../images/api3.png)
##This is JSON (**J**ava**S**cript **O**bject **N**otation)

---

#Sample API Request
![img-full](../images/4s_api1.png)

---

#Sample API Request
![img-full](../images/4s_api2.png)

---

#Sample API Request
![img-full](../images/4s_api2.png)

###Endpoint
+ `https://api.foursquare.com/v2/venues/search?`

---

#Sample API Request
![img-full](../images/4s_api3.png)

---

#Sample API Request
![img-full](../images/4s_api3.png)

###Query Parameters
+ `ll=40.7037253789768,-74.0079939173954`
+ `radius=100`
+ `limit=50`

---

#Sample API Request
![img-full](../images/4s_api4.png)

---

#Sample API Request
![img-full](../images/4s_api4.png)

###Authentication
+ `client_id=TQTH2POSXDUDYOHKHXM0VKDRCBSSYAFUWMVSWBCI10URJBTR`
+ `client_secret=F3TEHU5APOLSMLSJZYZYUV1SOL5V0V2HUS150YXGTXFPINGS`
+ `v=20140609`

---

#Sample API Response
![img](../images/4s_api_resp.png)

---

#Questions?
![img](../images/Batman-and-Robin-Running_meme.png)
###https://developer.foursquare.com/docs/venues/search 

---

#Opening API Response directly in OpenRefine
![img-full](../images/or_api1.png)

---

#Opening API Response directly in OpenRefine
![img-full](../images/or_api2.png)

---

#Opening API Response directly in OpenRefine
![img-full](../images/or_api3.png)

---

#Opening API Response directly in OpenRefine
![img-full](../images/or_api4.png)

---

#Removing Empty Rows
##Switch to rows
![img-full](../images/or_api5.png)

---

#Removing Empty Rows
##Text Facet on Column
![img-full](../images/or_api6.png)

---

#Removing Empty Rows
##Select "blank"
![img-full](../images/or_api7.png)

---

#Removing Empty Rows
##Remove All Matching Rows
![img-full](../images/or_api8.png)

---

#Removing Empty Rows
##Reset Facet
![img-full](../images/or_api9.png)

---

#Your turn
##https://foursquare.com/developers/apps  
+ Register for an account (if you donâ€™t have one already)
+ Create an application
+ Provide a URL (`http://www.pratt.edu` works just fine)
+ Get your client ID and client secret

---

#Exercise
##Get your own Foursquare venues data
+ Pick a location in New York City (http://teczno.com/squares/#9.75/40.729/-73.983)
+ Find the 100 nearest Foursquare Venues
+ Clean the data in OpenRefine
+ Import to CartoDB and style

---

class:center, middle
#No readings for next class
![img](../images/celebration.gif)
---

#Assignment 1
+ Find an interesting or visually compelling visualization online and write 2-3 paragraphs on the visualization, discussing the data source(s), the visual style, and how well the data was represented. Feel free to use the visualization resources listed above. Submit your text to the class page following the example shown.

---

#Assignment 2
+ Identify a question or topic you'd like to explore in this class, with the intention of creating a map related to the topics as part of your final project in this class. Write 2-3 paragraphs on why the topic is interesting to you, what data you'd like to explore using, and what you hope to contribute with your work.

---

#Resources 
+ [School of Data: Cleaning Data with OpenRefine](http://schoolofdata.org/handbook/recipes/cleaning-data-with-refine/)
+ [Enipedia OpenRefine Tutorial](http://enipedia.tudelft.nl/wiki/OpenRefine_Tutorial)

---

class: center,middle
#Any Issues? Questions?

---
class:center, middle
#See you next week

    </textarea>
    <script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>